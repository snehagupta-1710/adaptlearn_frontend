<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://cdn.jsdelivr.net/npm/remixicon@4.2.0/fonts/remixicon.css" rel="stylesheet">
<title>Quiz - SQL Command</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; font-family: cursive; transition: background-color 0.3s, color 0.3s; }
  body { display: flex; min-height: 100vh; background-color: #fff; color: #000; }

  /* Sidebar */
  .sidebar { position: fixed; top: 0; bottom: 0; width: 220px; background-color: #fff; border-right: 2px solid rgba(0,0,0,0.1); padding: 0 0 20px 0; z-index: 1001; display: flex; flex-direction: column; }
  .logo { height: 60px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-bottom: 10px; }
  .logo img { width: 130px; height: 40px; display: block; }
  .sidebar-menu { flex: 1; overflow-y: auto; -ms-overflow-style: none; scrollbar-width: none; }
  .sidebar-menu::-webkit-scrollbar { display: none; }
  .sidebar-menu ul { list-style: none; padding: 0 10px; }
  .sidebar-menu ul li { border-radius: 6px; margin-bottom: 5px; }
  .dropdown-btn { display: flex; justify-content: space-between; align-items: center; padding: 8px 10px; cursor: pointer; background: #f7f7f7; border-radius: 6px; font-weight: bold; transition: all 0.3s; }
  .dropdown-btn:hover { background: #763bbb; color: #fff; }
  .dropdown-btn.active { background: #763bbb; color: #fff; }
  .arrow { transition: transform 0.3s; }
  .rotate { transform: rotate(90deg); }
  .dropdown-container { display: none; padding-left: 10px; margin-top: 5px; }
  .dropdown-container a { display: block; padding: 6px 10px; border-radius: 6px; background: #f0f0f0; color: #333; text-decoration: none; margin-bottom: 3px; transition: all 0.2s; }
  .dropdown-container a:hover { background: #f0ebff; color: #763bbb; }
  .dropdown-container a.active { background: #763bbb; color: #fff; }

  /* Main content */
  .main-content { margin-left: 240px; width: calc(100% - 240px); padding: 10px 40px; overflow-y: auto;margin-top: 40px; }
  .header {
  background-color: #fff;
  border-bottom: 2px solid rgba(0,0,0,0.1);
  position: fixed;
  top: 0;
  left: 220px;
  right: 0;
  height: 60px;
  display: flex;
  justify-content: flex-end;
  align-items: center;
  gap: 16px;
  padding: 0 20px;
  z-index: 10;
}

.t-icon {
  background: #763bbb;
  color: #fff;
  width: 38px;
  height: 38px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  font-weight: 700;
  font-size: 18px;
  cursor: default;
}

.profile {
  display: flex;
  align-items: center;
  gap: 8px;
  font-weight: 600;
  cursor: pointer;
  position: relative;
}

.profile i {
  font-size: 18px;
  transition: transform 0.3s;
}

.profile.active i {
  transform: rotate(180deg);
}

.profile-dropdown {
  display: none;
  position: absolute;
  top: 45px;
  right: 0;
  background: #fff;
  border: 1px solid #ddd;
  border-radius: 6px;
  overflow: hidden;
  min-width: 150px;
  z-index: 10;
}

.profile-dropdown a {
  display: block;
  padding: 10px 14px;
  color: #111;
  text-decoration: none;
  transition: background 0.3s;
}

.profile-dropdown a:hover {
  background: #d9b3ff;
  color: #4a148c;
}

/* Dark mode */
body.dark-mode .header {
  background: #2a2a2a;
  color: #fff;
}

body.dark-mode .profile-dropdown {
  background: #2a2a2a;
  border-color: #444;
}

body.dark-mode .profile-dropdown a {
  color: #eaeaea;
}

body.dark-mode .profile-dropdown a:hover {
  background: #763bbb;
  color: #fff;
}


  /* Quiz Section */
  .quiz-section { max-width: 1300px; width: 100%; margin: 30px auto 0; padding: 5px 120px; border-radius: 12px; background-color: #f6f0ff; border: 2px solid #af75f1; 
  }
  h1 { text-align: center; color: #763bbb; margin-bottom: 30px; }
  .question { display: none; margin-bottom: 25px; }
  .question.active { display: block; }
  .question h3 { margin-bottom: 10px; }
  .options label { display: block; background-color: #fff; border: 1px solid #ddd; padding: 10px 40px; border-radius: 6px; margin-bottom: 8px; width: 700px; cursor: pointer; }
  .options label:hover { background-color: #f0ebff; border-color: #763bbb; }
  .correct-answer { color: green; font-weight: bold; margin-top: 5px; }
  .wrong-answer { color: red; font-weight: bold; margin-top: 5px; }

  /* Buttons */
  .button-row { display: flex; justify-content: center; gap: 20px; margin-top: 40px; }
  .prev-btn, .next-btn, .submit-btn { background-color: #763bbb; color: #fff; border: none; padding: 12px 30px; border-radius: 8px; font-size: 16px; cursor: pointer; text-align: center; display: inline-block; transition: 0.3s; }
  .prev-btn:hover, .next-btn:hover, .submit-btn:hover { background-color: #5d2ea1; }
  .score-box { text-align: center; margin-top: 20px; font-weight: bold; font-size: 18px; }
  .question-counter { text-align:center; margin-bottom: 15px; font-weight:bold; color:#763bbb; }

  @media (max-width: 900px) { .sidebar { display: none; } .main-content { margin-left: 0; padding: 80px 20px; } .button-row { flex-direction: column; gap: 10px; } .prev-btn, .next-btn, .submit-btn { width: 80%; } }

  /* Dark Mode */
  body.dark-mode { background-color: #1e1e1e; color: #f5f5f5; }
  body.dark-mode h1 { color:white; }
  body.dark-mode header { background-color: #2a2a2a; color: #fff; }
  body.dark-mode .sidebar { background-color: #2a2a2a; border-color: #444; color: #2a2a2a; }
  body.dark-mode .dropdown-btn:hover { background-color: #763bbb; color: #fff; }
  body.dark-mode .dropdown-container a { background-color: #2b2b2c; color: #f5f5f5; }
  body.dark-mode .dropdown-container a:hover { background-color: #4b2b7a; color: #fff; }
  body.dark-mode .dropdown-container a.active { background-color: #763bbb; color: #fff; }
  body.dark-mode .quiz-section { background-color: #2b2b2c; border-color: #763bbb; }
  body.dark-mode .options label { background-color: #333; border-color: #555; color: #f5f5f5; }
  body.dark-mode .options label:hover { background-color: #4b2b7a; border-color: #763bbb; }
  body.dark-mode .prev-btn, body.dark-mode .next-btn, body.dark-mode .submit-btn { background-color: #763bbb; }
</style>
</head>
<body>
<div class="container">
  <!-- Sidebar -->
   <aside class="sidebar">
  <!-- Logo stays fixed -->
  <div class="logo">
    <img class="logo" src="/Frontend/images/logo.png">
  </div>

  <!-- Scrollable menu -->
  <div class="sidebar-menu">
    <ul>
      <li>
        <div class="dropdown-btn">Introduction to Database <span class="arrow">▶</span></div>
        <div class="dropdown-container">
          <a href="/Frontend/beginner/topic_1.html">Beginner</a>
          <a href="/Frontend/intermediate/topic_1.html">Intermediate</a>
          <a href="/Frontend/advanced/topic_1.html">Advanced</a>
        </div>
      </li>

      <li>
        <div class="dropdown-btn">DBMS <span class="arrow">▶</span></div>
        <div class="dropdown-container">
          <a href="/Frontend/beginner/topic_2.html">Beginner</a>
          <a href="/Frontend/intermediate/topic_2.html">Intermediate</a>
          <a href="/Frontend/advanced/topic_2.html">Advanced</a>
        </div>
      </li>

      <li>
        <div class="dropdown-btn">RDBMS <span class="arrow">▶</span></div>
        <div class="dropdown-container">
          <a href="/Frontend/beginner/topic_3.html">Beginner</a>
          <a href="/Frontend/intermediate/topic_3.html">Intermediate</a>
          <a href="/Frontend/advanced/topic_3.html">Advanced</a>
        </div>
      </li>

      <li>
        <div class="dropdown-btn">Types of Keys <span class="arrow">▶</span></div>
        <div class="dropdown-container">
          <a href="/Frontend/beginner/topic_4.html">Beginner</a>
          <a href="/Frontend/intermediate/topic_4.html">Intermediate</a>
          <a href="/Frontend/advanced/topic_4.html">Advanced</a>
        </div>
      </li>

      <li>
        <div class="dropdown-btn active">SQL Commands <span class="arrow">▶</span></div>
        <div class="dropdown-container">
          <a href="/Frontend/beginner/topic_5.html">Beginner</a>
          <a href="/Frontend/intermediate/topic_5.html">Intermediate</a>
          <a href="/Frontend/advanced/topic_5.html">Advanced</a>
        </div>
      </li>

      <li>
        <div class="dropdown-btn">Joins <span class="arrow">▶</span></div>
        <div class="dropdown-container">
          <a href="/Frontend/beginner/topic_6.html">Beginner</a>
          <a href="/Frontend/intermediate/topic_6.html">Intermediate</a>
          <a href="/Frontend/advanced/topic_6.html">Advanced</a>
        </div>
      </li>

      <li>
        <div class="dropdown-btn">Table, Rows, Command <span class="arrow">▶</span></div>
        <div class="dropdown-container">
          <a href="/Frontend/beginner/topic_7.html">Beginner</a>
          <a href="/Frontend/intermediate/topic_7.html">Intermediate</a>
          <a href="/Frontend/advanced/topic_7.html">Advanced</a>
        </div>
      </li>
    </ul>
  </div>
</aside>
<header class="header">
  <i id="theme-toggle" class="ri-moon-line" title="Toggle theme"></i>

  <i class="ri-notification-3-line" title="Notifications"></i>

  <div class="t-icon">U</div> <!-- Will show user's first letter -->

  <div class="profile" id="profileBtn">
    <span id="profileName"></span>
    <i class="ri-arrow-down-s-line"></i>

    <div class="profile-dropdown" id="profileDropdown">
      <a href="/Frontend/js/logout.js">Logout</a>
      <a href="/Frontend/js/deleteAccount.js">Delete Account</a>
      <a href="/Frontend/home_page/index.html">Home Page</a>
    </div>
  </div>
</header>
  <!-- Main Content -->
  <main class="main-content">
  <section class="quiz-section">
      <h1>Quiz: SQL Command</h1>
      <div class="question-counter" id="questionCounter">Question 1 of 10</div>
      <form id="quizForm">

        <!-- SQL Questions -->
        <div class="question" data-question="q1">
          <h3>1. Which SQL command is used to retrieve data from a table?</h3>
          <div class="options">
            <label><input type="radio" name="q1" value="a"> SELECT</label>
            <label><input type="radio" name="q1" value="b"> INSERT</label>
            <label><input type="radio" name="q1" value="c"> DELETE</label>
          </div>
        </div>

        <div class="question" data-question="q2">
          <h3>2. Which command is used to add new records to a table?</h3>
          <div class="options">
            <label><input type="radio" name="q2" value="a"> INSERT</label>
            <label><input type="radio" name="q2" value="b"> UPDATE</label>
            <label><input type="radio" name="q2" value="c"> SELECT</label>
          </div>
        </div>

        <div class="question" data-question="q3">
          <h3>3. Which command is used to modify existing records?</h3>
          <div class="options">
            <label><input type="radio" name="q3" value="a"> UPDATE</label>
            <label><input type="radio" name="q3" value="b"> DELETE</label>
            <label><input type="radio" name="q3" value="c"> SELECT</label>
          </div>
        </div>

        <div class="question" data-question="q4">
          <h3>4. Which command deletes records from a table?</h3>
          <div class="options">
            <label><input type="radio" name="q4" value="a"> DELETE</label>
            <label><input type="radio" name="q4" value="b"> DROP</label>
            <label><input type="radio" name="q4" value="c"> TRUNCATE</label>
          </div>
        </div>

        <div class="question" data-question="q5">
          <h3>5. Which command removes the table structure completely?</h3>
          <div class="options">
            <label><input type="radio" name="q5" value="a"> DROP</label>
            <label><input type="radio" name="q5" value="b"> DELETE</label>
            <label><input type="radio" name="q5" value="c"> UPDATE</label>
          </div>
        </div>

        <div class="question" data-question="q6">
          <h3>6. Which command removes all data but keeps the table structure?</h3>
          <div class="options">
            <label><input type="radio" name="q6" value="a"> TRUNCATE</label>
            <label><input type="radio" name="q6" value="b"> DELETE</label>
            <label><input type="radio" name="q6" value="c"> DROP</label>
          </div>
        </div>

        <div class="question" data-question="q7">
          <h3>7. Which clause is used to filter records?</h3>
          <div class="options">
            <label><input type="radio" name="q7" value="a"> WHERE</label>
            <label><input type="radio" name="q7" value="b"> FROM</label>
            <label><input type="radio" name="q7" value="c"> SELECT</label>
          </div>
        </div>

        <div class="question" data-question="q8">
          <h3>8. Which command is used to create a new table?</h3>
          <div class="options">
            <label><input type="radio" name="q8" value="a"> CREATE TABLE</label>
            <label><input type="radio" name="q8" value="b"> INSERT INTO</label>
            <label><input type="radio" name="q8" value="c"> ALTER TABLE</label>
          </div>
        </div>

        <div class="question" data-question="q9">
          <h3>9. Which command changes table structure?</h3>
          <div class="options">
            <label><input type="radio" name="q9" value="a"> ALTER TABLE</label>
            <label><input type="radio" name="q9" value="b"> DROP</label>
            <label><input type="radio" name="q9" value="c"> TRUNCATE</label>
          </div>
        </div>

        <div class="question" data-question="q10">
          <h3>10. Which SQL command retrieves unique records?</h3>
          <div class="options">
            <label><input type="radio" name="q10" value="a"> SELECT DISTINCT</label>
            <label><input type="radio" name="q10" value="b"> SELECT ALL</label>
            <label><input type="radio" name="q10" value="c"> SELECT UNIQUE</label>
          </div>
        </div>

         
        <div class="button-row">
          <button type="button" class="prev-btn">◀ Previous</button>
          <button type="button" class="next-btn">Next ▶</button>
          <button type="button" class="submit-btn" onclick="checkAnswers()" style="display:none;">Submit Quiz</button>
        </div>
      </form>
      <div class="score-box" id="scoreBox"></div>
    </section>
  </main>
</div>

<script>

// Quiz navigation
let currentQuestion = 0;
const questions = document.querySelectorAll(".question");
const prevBtn = document.querySelector(".prev-btn");
const nextBtn = document.querySelector(".next-btn");
const submitBtn = document.querySelector(".submit-btn");
const counter = document.getElementById("questionCounter");

function showQuestion(index) {
  questions.forEach((q, i) => q.classList.toggle("active", i === index));
  prevBtn.style.display = index === 0 ? "none" : "inline-block";
  nextBtn.style.display = index === questions.length - 1 ? "none" : "inline-block";
  submitBtn.style.display = index === questions.length - 1 ? "inline-block" : "none";
  counter.textContent = `Question ${index+1} of ${questions.length}`;
}
showQuestion(currentQuestion);

nextBtn.addEventListener("click", () => {
  if (currentQuestion < questions.length - 1) { currentQuestion++; showQuestion(currentQuestion); }
});
prevBtn.addEventListener("click", () => {
  if (currentQuestion > 0) { currentQuestion--; showQuestion(currentQuestion); }
});

// Quiz checking
function checkAnswers() {
  const correctAnswers = { q1:"a", q2:"a", q3:"a", q4:"a", q5:"a", q6:"a", q7:"a", q8:"a", q9:"a", q10:"a" };
  let score = 0;
  document.querySelectorAll(".feedback").forEach(e=>e.remove());
  questions.forEach(q => {
    const key = q.dataset.question;
    const sel = q.querySelector(`input[name="${key}"]:checked`);
    const fb = document.createElement("div");
    fb.classList.add("feedback");
    if(sel){
      if(sel.value === correctAnswers[key]){
        score++;
        fb.innerHTML = `<div class='correct-answer'>✅ Correct!</div>`;
      } else {
        fb.innerHTML = `<div class='wrong-answer'>❌ Wrong. Correct: ${correctAnswers[key].toUpperCase()}</div>`;
      }
    } else {
      fb.innerHTML = `<div class='wrong-answer'>⚠️ Not answered. Correct: ${correctAnswers[key].toUpperCase()}</div>`;
    }
    q.appendChild(fb);
  });
  document.getElementById("scoreBox").innerHTML = `Your Score: ${score}/${questions.length}`;
}
async function saveQuizResult(score, total) {
  const token = localStorage.getItem("token");
  if (!token) {
    alert("Please log in first!");
    return;
  }

  const topicName = document.title.replace("Quiz - ", "").trim();

  try {
    const res = await fetch("http://localhost:5000/api/progress/update", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        Authorization: `Bearer ${token}`,
      },
      body: JSON.stringify({
        courseName: "Database",
        topic: topicName,
        score,
      }),
    });

    const data = await res.json();
    if (res.ok) {
      alert(`✅ Quiz saved successfully for "${topicName}"!\nScore: ${score}/${total}`);
    } else {
      alert("❌ Error: " + (data.message || "Server error"));
    }
  } catch (err) {
    console.error("Error saving quiz:", err);
    alert("❌ Could not connect to the server.");
  }
}


function checkAnswers() {
  const correctAnswers = { q1:"a", q2:"a", q3:"b", q4:"a", q5:"b", q6:"a", q7:"a", q8:"a", q9:"a", q10:"a" };
  let score = 0;
  const total = Object.keys(correctAnswers).length;
  questions.forEach(q => {
    const key = q.dataset.question;
    const selected = q.querySelector(`input[name="${key}"]:checked`);
    if (selected && selected.value === correctAnswers[key]) score++;
  });
  document.getElementById("scoreBox").innerHTML = `Your Score: ${score}/${total}`;
  
  // Save to DB
  saveQuizResult(score, total);
}

</script>
<script>
 
const themeToggle = document.getElementById("theme-toggle");

themeToggle.addEventListener("click", () => {
  document.body.classList.toggle("dark-mode");

  // Change icon dynamically
  if (document.body.classList.contains("dark-mode")) {
    themeToggle.classList.remove("ri-moon-line");
    themeToggle.classList.add("ri-sun-line");
  } else {
    themeToggle.classList.remove("ri-sun-line");
    themeToggle.classList.add("ri-moon-line");
  }
});
 const profileBtn = document.getElementById('profileBtn');
    const dropdown = document.getElementById('profileDropdown');
    profileBtn.addEventListener('click', () => {
      dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
      profileBtn.classList.toggle('active');
    });
    window.addEventListener('click', (e) => {
      if (!profileBtn.contains(e.target)) {
        dropdown.style.display = 'none';
        profileBtn.classList.remove('active');
      }
    });
    document.addEventListener("DOMContentLoaded", () => {
  const username = localStorage.getItem("username");
  const profileNameSpan = document.querySelector("#profileName");
  const circle = document.querySelector(".t-icon");

  if (username) {

    // Update profile name text
    profileNameSpan.textContent = username;

    // Update circle with first letter
    circle.textContent = username.charAt(0).toUpperCase();
  } else {
    window.location.href = "/Frontend//login&signup/login_form.html";
  }
});

    // Dropdown toggle functionality
    const dropdowns = document.querySelectorAll('.dropdown-btn');
    dropdowns.forEach(btn => {
      btn.addEventListener('click', () => {
        const container = btn.nextElementSibling;
        const arrow = btn.querySelector('.arrow');

        container.style.display = container.style.display === 'block' ? 'none' : 'block';
        arrow.classList.toggle('rotate');
      });
    });
  </script>
 <script src="/Frontend/js/logout.js"></script>
<script src="/Frontend/js/deleteAccount.js"></script>
<script src="/Frontend/js/authProtect.js"></script>
<script src="/Frontend/js/dashboardUser.js"></script>


</body>
</html>
